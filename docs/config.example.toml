# preload-ng example configuration
# Time values are in seconds unless noted.

[model]
# Observation/prediction cycle length.
cycle = 20
# Whether to use correlation in prediction.
use_correlation = true
# Minimum total mapped bytes to track an executable.
minsize = 100000
# Active-set window for lazy Markov edges.
active_window = 21600
# Optional half-life for exponential decay (seconds). Overrides decay when set.
# half_life = 3600
# Exponential decay factor.
decay = 0.01

[model.memory]
# Memory budget policy (percentages, clamped to -100..=100).
memtotal = -5
memavailable = 95

[system]
# Enable scanning and prediction.
doscan = true
dopredict = true
# Autosave interval in seconds.
autosave = 3600
# Executable path prefixes to include/exclude. "!" means deny. Longest match wins.
exeprefix = ["!/usr/sbin/", "!/usr/local/sbin/", "/"]
# Mapped file prefixes to include/exclude. "!" means deny. Longest match wins.
mapprefix = ["!/proc/", "!/sys/", "!/dev/", "!/tmp/", "!/run/", "/"]
# Enable fanotify file-open monitoring for broader prefetch coverage.
# Requires CAP_SYS_ADMIN. Falls back gracefully if unavailable.
fanotify = true
# Prefetch backend: auto | readahead | madvise | read.
# auto: select the fastest available backend automatically.
# readahead: readahead(2) syscall — no userspace buffer copy.
# madvise: mmap + madvise(MADV_WILLNEED) — effective for large files.
# read: posix_fadvise + read loop — traditional portable method.
prefetch_backend = "auto"
# Note: preload-ng automatically sets nice(19) and ionice IDLE class at
# startup to minimize impact on foreground applications.
# Prefetch sort strategy: none | path | block | inode.
sortstrategy = "block"
# Prefetch worker concurrency. Default: 1. 0 disables prefetch.
# Higher values prefetch more files in parallel but use more I/O bandwidth.
# Omit or comment out to use all CPU cores (auto).
prefetch_concurrency = 1
# Cache admission rejections (TTL in seconds). 0 disables caching.
policy_cache_ttl = 300
# Max number of cached rejection entries. 0 disables caching.
policy_cache_capacity = 1024

[persistence]
# Path to the state database.
# Defaults to $XDG_CACHE_HOME/preload-ng/state.db (~/.cache/preload-ng/state.db).
# state_path = "/var/lib/preload-ng/state.db"
# Optional override for autosave interval (seconds).
# autosave_interval = 120
save_on_shutdown = true
